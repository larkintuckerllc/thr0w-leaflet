!function(){"use strict";function t(t,i,l,d,r){function p(){return{lat:J.lat,lng:J.lng,zoomLevel:d}}function c(t){J=o.latLng(t.lat,t.lng),d=t.zoomLevel,b()}function u(){return{syncing:ft,animationSyncing:wt,nextMove:vt,nextMoveDuration:k,nextMoveLat:z,nextMoveLng:D,nextMoveZ:V}}function h(t){ft=t.syncing,wt=t.animationSyncing,_t&&!ft&&(_t=!1,A.idle()),gt&&!wt&&(gt=!1,E(),B.idle()),gt&&t.nextMove&&s(t.nextMoveDuration,t.nextMoveLat,t.nextMoveLng,t.netMoveZ)}function s(t,i,l,r){function p(){w+=a,w>h?(window.clearInterval(mt),mt=null,J=o.latLng(i,l),b(),B.update(),B.idle(),gt=!1,wt=!1,G.update(),G.idle()):(_=f>=0?J.lng+f<=180?J.lng+f:-180:J.lng+f>=-180?J.lng+f:180,J=o.latLng(J.lat+s,_),b(),B.update())}if(t!==parseInt(t))throw 400;if(void 0===i||"number"!=typeof i||i>e||n>i)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===r&&(r=d),"number"!=typeof r)throw 400;var c,u,h,s,f,_,w=0;if(ft&&(_t&&(_t=!1,A.idle()),ft=!1,G.update(),G.idle()),wt){if(!gt)return vt=!0,k=t,z=i,D=l,V=r,G.update(),void G.idle();E()}gt=!0,wt=!0,G.update(),G.idle(),Y(r),B.update(),c=Math.abs(t*(i-J.lat)/180),Math.abs(l-J.lng)<=180?(u=Math.abs(t*(l-J.lng)/180),h=Math.max(c,u),f=0!==h?(l-J.lng)/(h/a):0):J.lng>=0?(u=t*(180-J.lng+180+l)/180,h=Math.max(c,u),f=0!==h?(180-J.lng+180+l)/(h/a):0):(u=t*(180+J.lng+180-l)/180,h=Math.max(c,u),f=0!==h?-1*(180+J.lng+180-l)/(h/a):0),s=0!==h?(i-J.lat)/(h/a):0,mt=window.setInterval(p,a)}function f(){wt&&(gt&&(gt=!1,E(),B.idle()),wt=!1,G.update(),G.idle())}function _(){return T}function w(){Y(d+1),A.update(),A.idle()}function g(){Y(d-1),A.update(),A.idle()}function v(t){t.stopPropagation(),ut=!0,P=(t.pageX-Q)*O+et,S=(t.pageY-U)*O+nt,A.update(),_t=!0,ft=!0,G.update(),G.idle()}function m(t){if(t.stopPropagation(),_t&&ut){var e=(t.pageX-Q)*O+et,n=(t.pageY-U)*O+nt;X(P-e,S-n),P=e,S=n,A.update()}}function L(t){t.stopPropagation(),_t&&ut&&(ut=!1,A.idle(),_t=!1,ft=!1,G.update(),G.idle())}function M(t){var e,n,a,o;t.stopPropagation(),e=(t.touches[0].pageX-Q)*O+et,q=e,n=(t.touches[0].pageY-U)*O+nt,H=n,t.touches.length>2&&(st=!0),2===t.touches.length&&(a=(t.touches[1].pageX-Q)*O+et,o=(t.touches[1].pageY-U)*O+nt,I=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),Z=I,j=(e+a)/2,W=(n+o)/2),1===t.touches.length&&(st=!1,ht=!1,A.update(),_t=!0,ft=!0,G.update(),G.idle())}function y(t){if(!ht){var e,n,a,o;t.stopPropagation(),_t&&(e=(t.touches[0].pageX-Q)*O+et,n=(t.touches[0].pageY-U)*O+nt,st||2!==t.touches.length?(X(q-e,H-n),A.update()):(a=(t.touches[1].pageX-Q)*O+et,o=(t.touches[1].pageY-U)*O+nt,Z=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),j=(e+a)/2,W=(n+o)/2),q=e,H=n)}}function x(t){t.stopPropagation(),ht||_t&&(1===t.touches.length&&(st||(ht=!0,J=C.containerPointToLatLng(o.point(j,W)),Y(Z>I?d+1:d-1),A.update(),A.idle(),_t=!1,ft=!1,G.update(),G.idle())),0===t.touches.length&&(A.idle(),_t=!1,ft=!1,G.update(),G.idle()))}function X(t,a){var i=J.lat;i>e&&0>a||n>i&&a>0||(J=C.containerPointToLatLng(o.point($+t,tt+a)),b())}function Y(t){t=R>=t?t:R,t=t>=F?t:F,d=t,b()}function E(){mt&&(window.clearInterval(mt),mt=null)}function b(){C.setView(J,d,{animate:!1}),T.setView(C.containerPointToLatLng(o.point(it,lt)),d,{animate:!1})}if(!t||"object"!=typeof t)throw 400;if(void 0===i||"number"!=typeof i||i>e||n>i)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===d||"number"!=typeof d)throw 400;if(!r||"object"!=typeof r)throw 400;var T,C,P,S,q,H,I,Z,j,W,k,z,D,V,F,R,A,B,G,J=o.latLng(i,l),K=t.getFrame(),N=t.getContent(),O=t.getRowScale(),Q=K.offsetLeft,U=K.offsetTop,$=t.getWidth()/2,tt=t.getHeight()/2,et=t.frameXYToContentXY([0,0])[0],nt=t.frameXYToContentXY([0,0])[1],at=t.frameXYToContentXY([K.clientWidth/O,K.clientHeight/O])[0],ot=t.frameXYToContentXY([K.clientWidth/O,K.clientHeight/O])[1],it=(et+at)/2,lt=(nt+ot)/2,dt=document.createElement("div"),rt=document.createElement("div"),pt=document.createElement("div"),ct=document.createElement("div"),ut=!1,ht=!1,st=!1,ft=!1,_t=!1,wt=!1,gt=!1,vt=!1,mt=null;dt.classList.add("thr0w_leaflet_container"),N.appendChild(dt),rt.id="thr0w_leaflet_"+N.id,rt.classList.add("thr0w_leaflet_container__map"),rt.style.left=et+"px",rt.style.top=nt+"px",rt.style.width=at-et+"px",rt.style.height=ot-nt+"px",dt.appendChild(rt),T=o.map("thr0w_leaflet_"+N.id,r),pt.id="thr0w_leaflet_positioning_"+N.id,pt.classList.add("thr0w_leaflet_container__map"),pt.classList.add("thr0w_leaflet_container__map--positioning"),dt.appendChild(pt),C=o.map("thr0w_leaflet_positioning_"+N.id),ct.classList.add("thr0w_leaflet_palette"),ct.innerHTML=['<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--plus">+</div>',"</div>",'<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--minus">-</div>',"</div>"].join("\n"),N.appendChild(ct),b(),F=T.getMinZoom(),R=T.getMaxZoom(),A=new window.thr0w.Sync(t,"thr0w_leaflet_"+N.id,p,c),B=new window.thr0w.Sync(t,"thr0w_leaflet_animation_"+N.id,p,c,!0),G=new window.thr0w.Sync(t,"thr0w_leaflet_oob_"+N.id,u,h),dt.addEventListener("mousedown",v,!0),dt.addEventListener("mousemove",m,!0),dt.addEventListener("mouseup",L,!0),dt.addEventListener("touchstart",M,!0),dt.addEventListener("touchmove",y,!0),dt.addEventListener("touchend",x,!0),dt.addEventListener("touchcancel",x,!0),ct.querySelector(".thr0w_leaflet_palette__row__cell--plus").addEventListener("click",w),ct.querySelector(".thr0w_leaflet_palette__row__cell--minus").addEventListener("click",g),this.moveTo=s,this.moveStop=f,this.getLeafletMap=_}if(void 0===window.thr0w)throw 400;var e=80,n=-80,a=33,o=window.L,i={};window.thr0w.leaflet=i,i.Map=t}();