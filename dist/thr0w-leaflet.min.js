!function(){"use strict";function t(t,l,r,d,c){function p(){return{lat:O.lat,lng:O.lng,zoomLevel:d}}function u(t){O=i.latLng(t.lat,t.lng),d=t.zoomLevel,S()}function g(){return{syncing:_t,animationSyncing:Lt,nextMove:Mt,nextMoveDuration:D,nextMoveLat:F,nextMoveLng:R,nextMoveZ:A}}function h(t){_t=t.syncing,Lt=t.animationSyncing,vt&&!_t&&(vt=!1,B.idle()),mt&&!Lt&&(mt=!1,b(),G.idle()),mt&&t.nextMove&&s(t.nextMoveDuration,t.nextMoveLat,t.nextMoveLng,t.nextMoveZ)}function s(t,o,l,r){function c(){w+=a,w>g?(window.clearInterval(yt),yt=null,d=r,O=i.latLng(o,l),S(),G.update(),G.idle(),mt=!1,Lt=!1,J.update(),J.idle()):(f=s>=0?O.lng+s<=180?O.lng+s:-180:O.lng+s>=-180?O.lng+s:180,O=i.latLng(O.lat+h,f),S(),G.update())}if(t!==parseInt(t))throw 400;if(void 0===o||"number"!=typeof o||o>e||o<n)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===r&&(r=d),"number"!=typeof r)throw 400;var p,u,g,h,s,f,w=0;if(_t&&(vt&&(vt=!1,B.idle()),_t=!1,J.update(),J.idle()),Lt){if(!mt)return Mt=!0,D=t,F=o,R=l,A=r,J.update(),void J.idle();b(),G.idle(),mt=!1,Lt=!1,J.update(),J.idle()}mt=!0,Lt=!0,J.update(),J.idle(),0!==t&&(E(O,r),G.update()),o=Z(i.latLng(o,l),r),p=Math.abs(t*(o-O.lat)/180),Math.abs(l-O.lng)<=180?(u=Math.abs(t*(l-O.lng)/180),g=Math.max(p,u),s=0!==g?(l-O.lng)/(g/a):0):O.lng>=0?(u=t*(180-O.lng+180+l)/180,g=Math.max(p,u),s=0!==g?(180-O.lng+180+l)/(g/a):0):(u=t*(180+O.lng+180-l)/180,g=Math.max(p,u),s=0!==g?-1*(180+O.lng+180-l)/(g/a):0),h=0!==g?(o-O.lat)/(g/a):0,yt=window.setInterval(c,a)}function f(){Lt&&(mt&&(mt=!1,b(),G.idle()),Lt=!1,J.update(),J.idle())}function w(){return q}function _(){return O.lat}function v(){return O.lng}function L(){return d}function m(){E(O,d+1),B.update(),B.idle()}function M(){E(O,d-1),B.update(),B.idle()}function y(t){t.stopPropagation(),st=!0,V=(t.pageX-tt)*$+ot,j=(t.pageY-et)*$+it,B.update(),vt=!0,_t=!0,J.update(),J.idle()}function T(t){if(t.stopPropagation(),vt&&st){var e=(t.pageX-tt)*$+ot,n=(t.pageY-et)*$+it;C(V-e,j-n),V=e,j=n,B.update()}}function x(t){t.stopPropagation(),vt&&st&&(st=!1,B.idle(),vt=!1,_t=!1,J.update(),J.idle())}function X(t){t.stopPropagation();var e,n;1===t.touches.length&&(N=0,e=(t.touches[0].pageX-tt)*$+ot,W=e,n=(t.touches[0].pageY-et)*$+it,k=n,ft=!1,wt=!0,window.clearInterval(z),z=window.setInterval(I,1e3),B.update(),vt=!0,_t=!0,J.update(),J.idle())}function Y(t){if(t.stopPropagation(),!ft&&vt&&(wt=!1,!K)){var e,n,a,i,l;for(a=0;a<t.touches.length;a++)for(i=0;i<t.touches.length;i++)a>=i||(l=Math.floor($*Math.sqrt(Math.pow(t.touches[a].pageX-t.touches[i].pageX,2)+Math.pow(t.touches[a].pageY-t.touches[i].pageY,2))),N=l>N?l:N);if(N>=o)return void(K=!0);e=(t.touches[0].pageX-tt)*$+ot,n=(t.touches[0].pageY-et)*$+it,C(W-e,k-n),B.update(),W=e,k=n}}function P(t){t.stopPropagation();var a,o,l,r,c,p,u,g,h,s,f=0,w=(t.changedTouches[0].pageX-tt)*$+ot,_=(t.changedTouches[0].pageY-et)*$+it;if(!ft&&vt){if(K&&!Xt){for(Xt=!0,a=0;a<t.touches.length;a++)o=Math.floor($*Math.sqrt(Math.pow(t.touches[a].pageX-t.changedTouches[0].pageX,2)+Math.pow(t.touches[a].pageY-t.changedTouches[0].pageY,2))),o>f&&(l=a,f=o);r=(t.touches[l].pageX-tt)*$+ot,c=(t.touches[l].pageY-et)*$+it,p=(w+r)/2,u=(_+c)/2,g=H.containerPointToLatLng(i.point(p,u)),h=(O.lat+g.lat)/2,h=h<=e?h:e,h=h>=n?h:n,s=(O.lng+g.lng)/2,p>nt&&g.lng<O.lng&&(s=(O.lng+g.lng+360)/2,s=s<=180?s:s-360),p<nt&&g.lng>O.lng&&(s=(O.lng+g.lng-360)/2,s=s>=180?s:s+360),f>N?E(i.latLng(h,s),d+1):E(i.latLng(h,s),d-1),B.update()}1===t.touches.length&&(W=(t.touches[0].pageX-tt)*$+ot,k=(t.touches[0].pageY-et)*$+it),0===t.touches.length&&(K=!1,Xt=!1,window.clearInterval(z),B.idle(),vt=!1,_t=!1,J.update(),J.idle())}}function C(t,a){var o=H.containerPointToLatLng(i.point(0,0)),l=H.containerPointToLatLng(i.point(2*nt,2*at));o.lat>e&&a<0&&(a=0),l.lat<n&&a>0&&(a=0),O=H.containerPointToLatLng(i.point(nt+t,at+a)),S()}function E(t,e){var n;e=e<=xt?e:xt,e=e>=Tt?e:Tt,n=Z(t,e),O=i.latLng(n,t.lng),d=e,S()}function b(){yt&&(window.clearInterval(yt),yt=null)}function S(){H.setView(O,d,{animate:!1}),q.setView(H.containerPointToLatLng(i.point(dt,ct)),d,{animate:!1})}function I(){wt&&(ft=!0,window.clearInterval(z),B.idle(),vt=!1,_t=!1,J.update(),J.idle()),wt=!0}function Z(t,a){var o,l,r=t.lat;return H.setView(t,a,{animate:!1}),o=H.containerPointToLatLng(i.point(0,0)),l=H.containerPointToLatLng(i.point(2*nt,2*at)),o.lat>e&&(r=H.containerPointToLatLng(i.point(0,at+H.latLngToContainerPoint(i.latLng(e,0)).y)).lat),l.lat<n&&(r=H.containerPointToLatLng(i.point(0,H.latLngToContainerPoint(i.latLng(n,0)).y-at)).lat),H.setView(O,d,{animate:!1}),r}if(!t||"object"!=typeof t)throw 400;if(void 0===l||"number"!=typeof l||l>e||l<n)throw 400;if(void 0===r||"number"!=typeof r)throw 400;if(void 0===d||"number"!=typeof d)throw 400;if(!c||"object"!=typeof c)throw 400;var q,H,V,j,W,k,z,D,F,R,A,B,G,J,K,N,O=i.latLng(l,r),Q=t.getFrame(),U=t.getContent(),$=t.getRowScale(),tt=Q.offsetLeft,et=Q.offsetTop,nt=t.getWidth()/2,at=t.getHeight()/2,ot=t.frameXYToContentXY([0,0])[0],it=t.frameXYToContentXY([0,0])[1],lt=t.frameXYToContentXY([Q.clientWidth/$,Q.clientHeight/$])[0],rt=t.frameXYToContentXY([Q.clientWidth/$,Q.clientHeight/$])[1],dt=(ot+lt)/2,ct=(it+rt)/2,pt=document.createElement("div"),ut=document.createElement("div"),gt=document.createElement("div"),ht=document.createElement("div"),st=!1,ft=!1,wt=!0,_t=!1,vt=!1,Lt=!1,mt=!1,Mt=!1,yt=null,Tt=void 0!==c.minZoom?c.minZoom:1,xt=void 0!==c.maxZoom?c.maxZoom:999,Xt=!1;pt.classList.add("thr0w_leaflet_container"),U.appendChild(pt),ut.id="thr0w_leaflet_"+U.id,ut.classList.add("thr0w_leaflet_container__map"),ut.style.left=ot+"px",ut.style.top=it+"px",ut.style.width=lt-ot+"px",ut.style.height=rt-it+"px",pt.appendChild(ut),q=i.map("thr0w_leaflet_"+U.id,c),gt.id="thr0w_leaflet_positioning_"+U.id,gt.classList.add("thr0w_leaflet_container__map"),gt.classList.add("thr0w_leaflet_container__map--positioning"),pt.appendChild(gt),H=i.map("thr0w_leaflet_positioning_"+U.id),ht.classList.add("thr0w_leaflet_palette"),ht.innerHTML=['<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--plus">+</div>',"</div>",'<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--minus">-</div>',"</div>"].join("\n"),U.appendChild(ht),S(),E(O,d),B=new window.thr0w.Sync(t,"thr0w_leaflet_"+U.id,p,u),G=new window.thr0w.Sync(t,"thr0w_leaflet_animation_"+U.id,p,u,(!0)),J=new window.thr0w.Sync(t,"thr0w_leaflet_oob_"+U.id,g,h),pt.addEventListener("mousedown",y,!0),pt.addEventListener("mousemove",T,!0),pt.addEventListener("mouseup",x,!0),pt.addEventListener("touchstart",X,!0),pt.addEventListener("touchmove",Y,!0),pt.addEventListener("touchend",P,!0),pt.addEventListener("touchcancel",P,!0),ht.querySelector(".thr0w_leaflet_palette__row__cell--plus").addEventListener("click",m),ht.querySelector(".thr0w_leaflet_palette__row__cell--minus").addEventListener("click",M),this.moveTo=s,this.moveStop=f,this.getLeafletMap=w,this.getCenterLat=_,this.getCenterLng=v,this.getZoomLevel=L}if(void 0===window.thr0w)throw 300;var e=85,n=-85,a=33,o=400,i=window.L,l={};window.thr0w.leaflet=l,l.Map=t}();