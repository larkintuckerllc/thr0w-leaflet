!function(){"use strict";function t(t,i,l,d,r){function c(){return{lat:O.lat,lng:O.lng,zoomLevel:d}}function p(t){O=o.latLng(t.lat,t.lng),d=t.zoomLevel,E()}function u(){return{syncing:mt,animationSyncing:Mt,nextMove:xt,nextMoveDuration:D,nextMoveLat:F,nextMoveLng:R,nextMoveZ:A}}function h(t){mt=t.syncing,Mt=t.animationSyncing,Lt&&!mt&&(Lt=!1,J.idle()),yt&&!Mt&&(yt=!1,Y(),K.idle()),yt&&t.nextMove&&s(t.nextMoveDuration,t.nextMoveLat,t.nextMoveLng,t.nextMoveZ)}function s(t,i,l,r){function c(){f+=a,f>h?(window.clearInterval(Tt),Tt=null,d=r,O=o.latLng(i,l),E(),K.update(),K.idle(),yt=!1,Mt=!1,N.update(),N.idle()):(w=g>=0?O.lng+g<=180?O.lng+g:-180:O.lng+g>=-180?O.lng+g:180,O=o.latLng(O.lat+s,w),E(),K.update())}if(t!==parseInt(t))throw 400;if(void 0===i||"number"!=typeof i||i>e||n>i)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===r&&(r=d),"number"!=typeof r)throw 400;var p,u,h,s,g,w,f=0;if(mt&&(Lt&&(Lt=!1,J.idle()),mt=!1,N.update(),N.idle()),Mt){if(!yt)return xt=!0,D=t,F=i,R=l,A=r,N.update(),void N.idle();Y(),K.idle(),yt=!1,Mt=!1,N.update(),N.idle()}(0===t||b(O,r))&&b(o.latLng(i,l),r)&&(yt=!0,Mt=!0,N.update(),N.idle(),0!==t&&(X(O,r),K.update()),p=Math.abs(t*(i-O.lat)/180),Math.abs(l-O.lng)<=180?(u=Math.abs(t*(l-O.lng)/180),h=Math.max(p,u),g=0!==h?(l-O.lng)/(h/a):0):O.lng>=0?(u=t*(180-O.lng+180+l)/180,h=Math.max(p,u),g=0!==h?(180-O.lng+180+l)/(h/a):0):(u=t*(180+O.lng+180-l)/180,h=Math.max(p,u),g=0!==h?-1*(180+O.lng+180-l)/(h/a):0),s=0!==h?(i-O.lat)/(h/a):0,Tt=window.setInterval(c,a))}function g(){Mt&&(yt&&(yt=!1,Y(),K.idle()),Mt=!1,N.update(),N.idle())}function w(){return C}function f(){X(O,d+1),J.update(),J.idle()}function _(){X(O,d-1),J.update(),J.idle()}function v(t){t.stopPropagation(),gt=!0,I=(t.pageX-tt)*$+ot,q=(t.pageY-et)*$+it,J.update(),Lt=!0,mt=!0,N.update(),N.idle()}function m(t){if(t.stopPropagation(),Lt&&gt){var e=(t.pageX-tt)*$+ot,n=(t.pageY-et)*$+it;T(I-e,q-n),I=e,q=n,J.update()}}function L(t){t.stopPropagation(),Lt&&gt&&(gt=!1,J.idle(),Lt=!1,mt=!1,N.update(),N.idle())}function M(t){t.stopPropagation();var e,n,a,o;e=(t.touches[0].pageX-tt)*$+ot,H=e,n=(t.touches[0].pageY-et)*$+it,V=n,t.touches.length>2&&(vt=!0),2===t.touches.length&&(a=(t.touches[1].pageX-tt)*$+ot,o=(t.touches[1].pageY-et)*$+it,Z=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),j=Z,W=(e+a)/2,k=(n+o)/2),1===t.touches.length&&(ft=!1,_t=!0,window.clearInterval(z),z=window.setInterval(P,1e3),vt=!1,wt=!1,J.update(),Lt=!0,mt=!0,N.update(),N.idle())}function y(t){if(t.stopPropagation(),!ft&&!wt){var e,n,a,o;Lt&&(_t=!1,e=(t.touches[0].pageX-tt)*$+ot,n=(t.touches[0].pageY-et)*$+it,vt||2!==t.touches.length?(T(H-e,V-n),J.update()):(a=(t.touches[1].pageX-tt)*$+ot,o=(t.touches[1].pageY-et)*$+it,j=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),W=(e+a)/2,k=(n+o)/2),H=e,V=n)}}function x(t){t.stopPropagation();var a,i,l;ft||wt||Lt&&(1===t.touches.length&&(vt||(wt=!0,a=S.containerPointToLatLng(o.point(W,k)),i=(O.lat+a.lat)/2,i=e>=i?i:e,i=i>=n?i:n,l=(O.lng+a.lng)/2,W>nt&&a.lng<O.lng&&(l=(O.lng+a.lng+360)/2,l=180>=l?l:l-360),nt>W&&a.lng>O.lng&&(l=(O.lng+a.lng-360)/2,l=l>=180?l:l+360),j>Z?X(o.latLng(i,l),d+1):X(o.latLng(i,l),d-1),J.update(),J.idle(),Lt=!1,mt=!1,N.update(),N.idle())),0===t.touches.length&&(window.clearInterval(z),J.idle(),Lt=!1,mt=!1,N.update(),N.idle()))}function T(t,a){var i=S.containerPointToLatLng(o.point(0,0)),l=S.containerPointToLatLng(o.point(2*nt,2*at));i.lat>e&&0>a||l.lat<n&&a>0||(O=S.containerPointToLatLng(o.point(nt+t,at+a)),E())}function X(t,e){e=G>=e?e:G,e=e>=B?e:B,b(t,e)&&(O=t,d=e,E())}function Y(){Tt&&(window.clearInterval(Tt),Tt=null)}function E(){S.setView(O,d,{animate:!1}),C.setView(S.containerPointToLatLng(o.point(rt,ct)),d,{animate:!1})}function P(){_t&&(ft=!0,window.clearInterval(z),J.idle(),Lt=!1,mt=!1,N.update(),N.idle()),_t=!0}function b(t,a){var i,l,r=!0;return S.setView(t,a,{animate:!1}),i=S.containerPointToLatLng(o.point(0,0)),l=S.containerPointToLatLng(o.point(2*nt,2*at)),i.lat>e&&(r=!1),l.lat<n&&(r=!1),S.setView(O,d,{animate:!1}),r}if(!t||"object"!=typeof t)throw 400;if(void 0===i||"number"!=typeof i||i>e||n>i)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===d||"number"!=typeof d)throw 400;if(!r||"object"!=typeof r)throw 400;var C,S,I,q,H,V,Z,j,W,k,z,D,F,R,A,B,G,J,K,N,O=o.latLng(i,l),Q=t.getFrame(),U=t.getContent(),$=t.getRowScale(),tt=Q.offsetLeft,et=Q.offsetTop,nt=t.getWidth()/2,at=t.getHeight()/2,ot=t.frameXYToContentXY([0,0])[0],it=t.frameXYToContentXY([0,0])[1],lt=t.frameXYToContentXY([Q.clientWidth/$,Q.clientHeight/$])[0],dt=t.frameXYToContentXY([Q.clientWidth/$,Q.clientHeight/$])[1],rt=(ot+lt)/2,ct=(it+dt)/2,pt=document.createElement("div"),ut=document.createElement("div"),ht=document.createElement("div"),st=document.createElement("div"),gt=!1,wt=!1,ft=!1,_t=!0,vt=!1,mt=!1,Lt=!1,Mt=!1,yt=!1,xt=!1,Tt=null;pt.classList.add("thr0w_leaflet_container"),U.appendChild(pt),ut.id="thr0w_leaflet_"+U.id,ut.classList.add("thr0w_leaflet_container__map"),ut.style.left=ot+"px",ut.style.top=it+"px",ut.style.width=lt-ot+"px",ut.style.height=dt-it+"px",pt.appendChild(ut),C=o.map("thr0w_leaflet_"+U.id,r),ht.id="thr0w_leaflet_positioning_"+U.id,ht.classList.add("thr0w_leaflet_container__map"),ht.classList.add("thr0w_leaflet_container__map--positioning"),pt.appendChild(ht),S=o.map("thr0w_leaflet_positioning_"+U.id),st.classList.add("thr0w_leaflet_palette"),st.innerHTML=['<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--plus">+</div>',"</div>",'<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--minus">-</div>',"</div>"].join("\n"),U.appendChild(st),E(),B=C.getMinZoom(),G=C.getMaxZoom(),J=new window.thr0w.Sync(t,"thr0w_leaflet_"+U.id,c,p),K=new window.thr0w.Sync(t,"thr0w_leaflet_animation_"+U.id,c,p,!0),N=new window.thr0w.Sync(t,"thr0w_leaflet_oob_"+U.id,u,h),pt.addEventListener("mousedown",v,!0),pt.addEventListener("mousemove",m,!0),pt.addEventListener("mouseup",L,!0),pt.addEventListener("touchstart",M,!0),pt.addEventListener("touchmove",y,!0),pt.addEventListener("touchend",x,!0),pt.addEventListener("touchcancel",x,!0),st.querySelector(".thr0w_leaflet_palette__row__cell--plus").addEventListener("click",f),st.querySelector(".thr0w_leaflet_palette__row__cell--minus").addEventListener("click",_),this.moveTo=s,this.moveStop=g,this.getLeafletMap=w}if(void 0===window.thr0w)throw 400;var e=85,n=-85,a=33,o=window.L,i={};window.thr0w.leaflet=i,i.Map=t}();