!function(){"use strict";function t(t,l,i,d,r){function c(){return{lat:N.lat,lng:N.lng,zoomLevel:d}}function p(t){N=o.latLng(t.lat,t.lng),d=t.zoomLevel,b()}function u(){return{syncing:vt,animationSyncing:Lt,nextMove:yt,nextMoveDuration:D,nextMoveLat:V,nextMoveLng:F,nextMoveZ:R}}function h(t){vt=t.syncing,Lt=t.animationSyncing,mt&&!vt&&(mt=!1,G.idle()),Mt&&!Lt&&(Mt=!1,E(),J.idle()),Mt&&t.nextMove&&s(t.nextMoveDuration,t.nextMoveLat,t.nextMoveLng,t.netMoveZ)}function s(t,l,i,r){function c(){g+=a,g>h?(window.clearInterval(xt),xt=null,N=o.latLng(l,i),b(),J.update(),J.idle(),Mt=!1,Lt=!1,K.update(),K.idle()):(f=w>=0?N.lng+w<=180?N.lng+w:-180:N.lng+w>=-180?N.lng+w:180,N=o.latLng(N.lat+s,f),b(),J.update())}if(t!==parseInt(t))throw 400;if(void 0===l||"number"!=typeof l||l>e||n>l)throw 400;if(void 0===i||"number"!=typeof i)throw 400;if(void 0===r&&(r=d),"number"!=typeof r)throw 400;var p,u,h,s,w,f,g=0;if(vt&&(mt&&(mt=!1,G.idle()),vt=!1,K.update(),K.idle()),Lt){if(!Mt)return yt=!0,D=t,V=l,F=i,R=r,K.update(),void K.idle();E()}Mt=!0,Lt=!0,K.update(),K.idle(),Y(r),J.update(),p=Math.abs(t*(l-N.lat)/180),Math.abs(i-N.lng)<=180?(u=Math.abs(t*(i-N.lng)/180),h=Math.max(p,u),w=0!==h?(i-N.lng)/(h/a):0):N.lng>=0?(u=t*(180-N.lng+180+i)/180,h=Math.max(p,u),w=0!==h?(180-N.lng+180+i)/(h/a):0):(u=t*(180+N.lng+180-i)/180,h=Math.max(p,u),w=0!==h?-1*(180+N.lng+180-i)/(h/a):0),s=0!==h?(l-N.lat)/(h/a):0,xt=window.setInterval(c,a)}function w(){Lt&&(Mt&&(Mt=!1,E(),J.idle()),Lt=!1,K.update(),K.idle())}function f(){return C}function g(){Y(d+1),G.update(),G.idle()}function _(){Y(d-1),G.update(),G.idle()}function v(t){t.stopPropagation(),st=!0,S=(t.pageX-$)*U+at,I=(t.pageY-tt)*U+ot,G.update(),mt=!0,vt=!0,K.update(),K.idle()}function m(t){if(t.stopPropagation(),mt&&st){var e=(t.pageX-$)*U+at,n=(t.pageY-tt)*U+ot;X(S-e,I-n),S=e,I=n,G.update()}}function L(t){t.stopPropagation(),mt&&st&&(st=!1,G.idle(),mt=!1,vt=!1,K.update(),K.idle())}function M(t){t.stopPropagation();var e,n,a,o;e=(t.touches[0].pageX-$)*U+at,q=e,n=(t.touches[0].pageY-tt)*U+ot,H=n,t.touches.length>2&&(_t=!0),2===t.touches.length&&(a=(t.touches[1].pageX-$)*U+at,o=(t.touches[1].pageY-tt)*U+ot,Z=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),j=Z,W=(e+a)/2,k=(n+o)/2),1===t.touches.length&&(ft=!1,gt=!0,window.clearInterval(z),z=window.setInterval(T,1e3),_t=!1,wt=!1,G.update(),mt=!0,vt=!0,K.update(),K.idle())}function y(t){if(t.stopPropagation(),!ft&&!wt){var e,n,a,o;mt&&(gt=!1,e=(t.touches[0].pageX-$)*U+at,n=(t.touches[0].pageY-tt)*U+ot,_t||2!==t.touches.length?(X(q-e,H-n),G.update()):(a=(t.touches[1].pageX-$)*U+at,o=(t.touches[1].pageY-tt)*U+ot,j=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),W=(e+a)/2,k=(n+o)/2),q=e,H=n)}}function x(t){t.stopPropagation();var a,l,i;ft||wt||mt&&(1===t.touches.length&&(_t||(wt=!0,a=P.containerPointToLatLng(o.point(W,k)),l=(N.lat+a.lat)/2,l=e>=l?l:e,l=l>=n?l:n,i=(N.lng+a.lng)/2,W>et&&a.lng<N.lng&&(i=(N.lng+a.lng+360)/2,i=180>=i?i:i-360),et>W&&a.lng>N.lng&&(i=(N.lng+a.lng-360)/2,i=i>=180?i:i+360),N=o.latLng(l,i),Y(j>Z?d+1:d-1),G.update(),G.idle(),mt=!1,vt=!1,K.update(),K.idle())),0===t.touches.length&&(window.clearInterval(z),G.idle(),mt=!1,vt=!1,K.update(),K.idle()))}function X(t,a){var l=N.lat;l>e&&0>a||n>l&&a>0||(N=P.containerPointToLatLng(o.point(et+t,nt+a)),b())}function Y(t){t=B>=t?t:B,t=t>=A?t:A,d=t,b()}function E(){xt&&(window.clearInterval(xt),xt=null)}function b(){P.setView(N,d,{animate:!1}),C.setView(P.containerPointToLatLng(o.point(dt,rt)),d,{animate:!1})}function T(){gt&&(ft=!0,window.clearInterval(z),G.idle(),mt=!1,vt=!1,K.update(),K.idle()),gt=!0}if(!t||"object"!=typeof t)throw 400;if(void 0===l||"number"!=typeof l||l>e||n>l)throw 400;if(void 0===i||"number"!=typeof i)throw 400;if(void 0===d||"number"!=typeof d)throw 400;if(!r||"object"!=typeof r)throw 400;var C,P,S,I,q,H,Z,j,W,k,z,D,V,F,R,A,B,G,J,K,N=o.latLng(l,i),O=t.getFrame(),Q=t.getContent(),U=t.getRowScale(),$=O.offsetLeft,tt=O.offsetTop,et=t.getWidth()/2,nt=t.getHeight()/2,at=t.frameXYToContentXY([0,0])[0],ot=t.frameXYToContentXY([0,0])[1],lt=t.frameXYToContentXY([O.clientWidth/U,O.clientHeight/U])[0],it=t.frameXYToContentXY([O.clientWidth/U,O.clientHeight/U])[1],dt=(at+lt)/2,rt=(ot+it)/2,ct=document.createElement("div"),pt=document.createElement("div"),ut=document.createElement("div"),ht=document.createElement("div"),st=!1,wt=!1,ft=!1,gt=!0,_t=!1,vt=!1,mt=!1,Lt=!1,Mt=!1,yt=!1,xt=null;ct.classList.add("thr0w_leaflet_container"),Q.appendChild(ct),pt.id="thr0w_leaflet_"+Q.id,pt.classList.add("thr0w_leaflet_container__map"),pt.style.left=at+"px",pt.style.top=ot+"px",pt.style.width=lt-at+"px",pt.style.height=it-ot+"px",ct.appendChild(pt),C=o.map("thr0w_leaflet_"+Q.id,r),ut.id="thr0w_leaflet_positioning_"+Q.id,ut.classList.add("thr0w_leaflet_container__map"),ut.classList.add("thr0w_leaflet_container__map--positioning"),ct.appendChild(ut),P=o.map("thr0w_leaflet_positioning_"+Q.id),ht.classList.add("thr0w_leaflet_palette"),ht.innerHTML=['<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--plus">+</div>',"</div>",'<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--minus">-</div>',"</div>"].join("\n"),Q.appendChild(ht),b(),A=C.getMinZoom(),B=C.getMaxZoom(),G=new window.thr0w.Sync(t,"thr0w_leaflet_"+Q.id,c,p),J=new window.thr0w.Sync(t,"thr0w_leaflet_animation_"+Q.id,c,p,!0),K=new window.thr0w.Sync(t,"thr0w_leaflet_oob_"+Q.id,u,h),ct.addEventListener("mousedown",v,!0),ct.addEventListener("mousemove",m,!0),ct.addEventListener("mouseup",L,!0),ct.addEventListener("touchstart",M,!0),ct.addEventListener("touchmove",y,!0),ct.addEventListener("touchend",x,!0),ct.addEventListener("touchcancel",x,!0),ht.querySelector(".thr0w_leaflet_palette__row__cell--plus").addEventListener("click",g),ht.querySelector(".thr0w_leaflet_palette__row__cell--minus").addEventListener("click",_),this.moveTo=s,this.moveStop=w,this.getLeafletMap=f}if(void 0===window.thr0w)throw 400;var e=80,n=-80,a=33,o=window.L,l={};window.thr0w.leaflet=l,l.Map=t}();