!function(){"use strict";function t(t,l,r,d,c){function p(){return{lat:U.lat,lng:U.lng,zoomLevel:d}}function u(t){U=i.latLng(t.lat,t.lng),d=t.zoomLevel,S()}function g(){return{syncing:Mt,animationSyncing:xt,nextMove:Pt,nextMoveDuration:B,nextMoveLat:G,nextMoveLng:J,nextMoveZ:K}}function h(t){Mt=t.syncing,xt=t.animationSyncing,yt&&!Mt&&(yt=!1,N.idle()),Tt&&!xt&&(Tt=!1,b(),O.idle()),Tt&&t.nextMove&&s(t.nextMoveDuration,t.nextMoveLat,t.nextMoveLng,t.nextMoveZ)}function s(t,o,l,r){function c(){w+=a,w>g?(window.clearInterval(Xt),Xt=null,d=r,U=i.latLng(o,l),S(),O.update(),O.idle(),Tt=!1,xt=!1,Q.update(),Q.idle()):(f=s>=0?U.lng+s<=180?U.lng+s:-180:U.lng+s>=-180?U.lng+s:180,U=i.latLng(U.lat+h,f),S(),O.update())}if(t!==parseInt(t))throw 400;if(void 0===o||"number"!=typeof o||o>e||o<n)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===r&&(r=d),"number"!=typeof r)throw 400;var p,u,g,h,s,f,w=0;if(Mt&&(yt&&(yt=!1,N.idle()),Mt=!1,Q.update(),Q.idle()),xt){if(!Tt)return Pt=!0,B=t,G=o,J=l,K=r,Q.update(),void Q.idle();b(),O.idle(),Tt=!1,xt=!1,Q.update(),Q.idle()}Tt=!0,xt=!0,Q.update(),Q.idle(),0!==t&&(E(U,r),O.update()),o=Z(i.latLng(o,l),r),p=Math.abs(t*(o-U.lat)/180),Math.abs(l-U.lng)<=180?(u=Math.abs(t*(l-U.lng)/180),g=Math.max(p,u),s=0!==g?(l-U.lng)/(g/a):0):U.lng>=0?(u=t*(180-U.lng+180+l)/180,g=Math.max(p,u),s=0!==g?(180-U.lng+180+l)/(g/a):0):(u=t*(180+U.lng+180-l)/180,g=Math.max(p,u),s=0!==g?-1*(180+U.lng+180-l)/(g/a):0),h=0!==g?(o-U.lat)/(g/a):0,Xt=window.setInterval(c,a)}function f(){xt&&(Tt&&(Tt=!1,b(),O.idle()),xt=!1,Q.update(),Q.idle())}function w(){return q}function _(){return U.lat}function v(){return U.lng}function L(){return d}function m(){E(U,d+1),N.update(),N.idle()}function M(){E(U,d-1),N.update(),N.idle()}function y(t){t.stopPropagation(),wt=!0,V=(t.pageX-nt)*et+lt,j=(t.pageY-at)*et+rt,N.update(),yt=!0,Mt=!0,Q.update(),Q.idle()}function x(t){if(t.stopPropagation(),yt&&wt){var e=(t.pageX-nt)*et+lt,n=(t.pageY-at)*et+rt;C(V-e,j-n),V=e,j=n,N.update()}}function T(t){t.stopPropagation(),yt&&wt&&(wt=!1,N.idle(),yt=!1,Mt=!1,Q.update(),Q.idle())}function P(t){t.stopPropagation();var e,n,a,i;e=(t.touches[0].pageX-nt)*et+lt,W=e,n=(t.touches[0].pageY-at)*et+rt,k=n,t.touches.length>2&&(mt=!0),2===t.touches.length&&(a=(t.touches[1].pageX-nt)*et+lt,i=(t.touches[1].pageY-at)*et+rt,z=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-i,2))),D=z,F=(e+a)/2,R=(n+i)/2,z<o&&(mt=!0)),1===t.touches.length&&(vt=!1,Lt=!0,window.clearInterval(A),A=window.setInterval(I,1e3),mt=!1,_t=!1,N.update(),yt=!0,Mt=!0,Q.update(),Q.idle())}function X(t){if(t.stopPropagation(),!vt&&!_t){var e,n,a,o;yt&&(Lt=!1,e=(t.touches[0].pageX-nt)*et+lt,n=(t.touches[0].pageY-at)*et+rt,mt||2!==t.touches.length?(C(W-e,k-n),N.update()):(a=(t.touches[1].pageX-nt)*et+lt,o=(t.touches[1].pageY-at)*et+rt,D=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),F=(e+a)/2,R=(n+o)/2),W=e,k=n)}}function Y(t){t.stopPropagation();var a,o,l;vt||_t||yt&&(1===t.touches.length&&(mt||(_t=!0,a=H.containerPointToLatLng(i.point(F,R)),o=(U.lat+a.lat)/2,o=o<=e?o:e,o=o>=n?o:n,l=(U.lng+a.lng)/2,F>ot&&a.lng<U.lng&&(l=(U.lng+a.lng+360)/2,l=l<=180?l:l-360),F<ot&&a.lng>U.lng&&(l=(U.lng+a.lng-360)/2,l=l>=180?l:l+360),D>z?E(i.latLng(o,l),d+1):E(i.latLng(o,l),d-1),N.update(),N.idle(),yt=!1,Mt=!1,Q.update(),Q.idle())),0===t.touches.length&&(window.clearInterval(A),N.idle(),yt=!1,Mt=!1,Q.update(),Q.idle()))}function C(t,a){var o=H.containerPointToLatLng(i.point(0,0)),l=H.containerPointToLatLng(i.point(2*ot,2*it));o.lat>e&&a<0&&(a=0),l.lat<n&&a>0&&(a=0),U=H.containerPointToLatLng(i.point(ot+t,it+a)),S()}function E(t,e){var n;e=e<=Ct?e:Ct,e=e>=Yt?e:Yt,n=Z(t,e),U=i.latLng(n,t.lng),d=e,S()}function b(){Xt&&(window.clearInterval(Xt),Xt=null)}function S(){H.setView(U,d,{animate:!1}),q.setView(H.containerPointToLatLng(i.point(pt,ut)),d,{animate:!1})}function I(){Lt&&(vt=!0,window.clearInterval(A),N.idle(),yt=!1,Mt=!1,Q.update(),Q.idle()),Lt=!0}function Z(t,a){var o,l,r=t.lat;return H.setView(t,a,{animate:!1}),o=H.containerPointToLatLng(i.point(0,0)),l=H.containerPointToLatLng(i.point(2*ot,2*it)),o.lat>e&&(r=H.containerPointToLatLng(i.point(0,it+H.latLngToContainerPoint(i.latLng(e,0)).y)).lat),l.lat<n&&(r=H.containerPointToLatLng(i.point(0,H.latLngToContainerPoint(i.latLng(n,0)).y-it)).lat),H.setView(U,d,{animate:!1}),r}if(!t||"object"!=typeof t)throw 400;if(void 0===l||"number"!=typeof l||l>e||l<n)throw 400;if(void 0===r||"number"!=typeof r)throw 400;if(void 0===d||"number"!=typeof d)throw 400;if(!c||"object"!=typeof c)throw 400;var q,H,V,j,W,k,z,D,F,R,A,B,G,J,K,N,O,Q,U=i.latLng(l,r),$=t.getFrame(),tt=t.getContent(),et=t.getRowScale(),nt=$.offsetLeft,at=$.offsetTop,ot=t.getWidth()/2,it=t.getHeight()/2,lt=t.frameXYToContentXY([0,0])[0],rt=t.frameXYToContentXY([0,0])[1],dt=t.frameXYToContentXY([$.clientWidth/et,$.clientHeight/et])[0],ct=t.frameXYToContentXY([$.clientWidth/et,$.clientHeight/et])[1],pt=(lt+dt)/2,ut=(rt+ct)/2,gt=document.createElement("div"),ht=document.createElement("div"),st=document.createElement("div"),ft=document.createElement("div"),wt=!1,_t=!1,vt=!1,Lt=!0,mt=!1,Mt=!1,yt=!1,xt=!1,Tt=!1,Pt=!1,Xt=null,Yt=void 0!==c.minZoom?c.minZoom:1,Ct=void 0!==c.maxZoom?c.maxZoom:999;gt.classList.add("thr0w_leaflet_container"),tt.appendChild(gt),ht.id="thr0w_leaflet_"+tt.id,ht.classList.add("thr0w_leaflet_container__map"),ht.style.left=lt+"px",ht.style.top=rt+"px",ht.style.width=dt-lt+"px",ht.style.height=ct-rt+"px",gt.appendChild(ht),q=i.map("thr0w_leaflet_"+tt.id,c),st.id="thr0w_leaflet_positioning_"+tt.id,st.classList.add("thr0w_leaflet_container__map"),st.classList.add("thr0w_leaflet_container__map--positioning"),gt.appendChild(st),H=i.map("thr0w_leaflet_positioning_"+tt.id),ft.classList.add("thr0w_leaflet_palette"),ft.innerHTML=['<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--plus">+</div>',"</div>",'<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--minus">-</div>',"</div>"].join("\n"),tt.appendChild(ft),S(),E(U,d),N=new window.thr0w.Sync(t,"thr0w_leaflet_"+tt.id,p,u),O=new window.thr0w.Sync(t,"thr0w_leaflet_animation_"+tt.id,p,u,(!0)),Q=new window.thr0w.Sync(t,"thr0w_leaflet_oob_"+tt.id,g,h),gt.addEventListener("mousedown",y,!0),gt.addEventListener("mousemove",x,!0),gt.addEventListener("mouseup",T,!0),gt.addEventListener("touchstart",P,!0),gt.addEventListener("touchmove",X,!0),gt.addEventListener("touchend",Y,!0),gt.addEventListener("touchcancel",Y,!0),ft.querySelector(".thr0w_leaflet_palette__row__cell--plus").addEventListener("click",m),ft.querySelector(".thr0w_leaflet_palette__row__cell--minus").addEventListener("click",M),this.moveTo=s,this.moveStop=f,this.getLeafletMap=w,this.getCenterLat=_,this.getCenterLng=v,this.getZoomLevel=L}if(void 0===window.thr0w)throw 400;var e=85,n=-85,a=33,o=400,i=window.L,l={};window.thr0w.leaflet=l,l.Map=t}();