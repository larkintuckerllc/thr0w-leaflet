!function(){"use strict";function t(t,i,l,r,d){function c(){return{lat:$.lat,lng:$.lng,zoomLevel:r}}function p(t){$=o.latLng(t.lat,t.lng),r=t.zoomLevel,C()}function u(){return{syncing:yt,animationSyncing:Tt,nextMove:Xt,nextMoveDuration:A,nextMoveLat:B,nextMoveLng:G,nextMoveZ:J}}function g(t){yt=t.syncing,Tt=t.animationSyncing,xt&&!yt&&(xt=!1,O.idle()),Pt&&!Tt&&(Pt=!1,b(),Q.idle()),Pt&&t.nextMove&&h(t.nextMoveDuration,t.nextMoveLat,t.nextMoveLng,t.nextMoveZ)}function h(t,i,l,d){function c(){w+=a,w>g?(window.clearInterval(Yt),Yt=null,r=d,$=o.latLng(i,l),C(),Q.update(),Q.idle(),Pt=!1,Tt=!1,U.update(),U.idle()):(f=s>=0?$.lng+s<=180?$.lng+s:-180:$.lng+s>=-180?$.lng+s:180,$=o.latLng($.lat+h,f),C(),Q.update())}if(t!==parseInt(t))throw 400;if(void 0===i||"number"!=typeof i||i>e||n>i)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===d&&(d=r),"number"!=typeof d)throw 400;var p,u,g,h,s,f,w=0;if(yt&&(xt&&(xt=!1,O.idle()),yt=!1,U.update(),U.idle()),Tt){if(!Pt)return Xt=!0,A=t,B=i,G=l,J=d,U.update(),void U.idle();b(),Q.idle(),Pt=!1,Tt=!1,U.update(),U.idle()}(0===t||I($,d))&&I(o.latLng(i,l),d)&&(Pt=!0,Tt=!0,U.update(),U.idle(),0!==t&&(E($,d),Q.update()),p=Math.abs(t*(i-$.lat)/180),Math.abs(l-$.lng)<=180?(u=Math.abs(t*(l-$.lng)/180),g=Math.max(p,u),s=0!==g?(l-$.lng)/(g/a):0):$.lng>=0?(u=t*(180-$.lng+180+l)/180,g=Math.max(p,u),s=0!==g?(180-$.lng+180+l)/(g/a):0):(u=t*(180+$.lng+180-l)/180,g=Math.max(p,u),s=0!==g?-1*(180+$.lng+180-l)/(g/a):0),h=0!==g?(i-$.lat)/(g/a):0,Yt=window.setInterval(c,a))}function s(){Tt&&(Pt&&(Pt=!1,b(),Q.idle()),Tt=!1,U.update(),U.idle())}function f(){return Z}function w(){return $.lat}function _(){return $.lng}function v(){return r}function L(){E($,r+1),O.update(),O.idle()}function m(){E($,r-1),O.update(),O.idle()}function M(t){t.stopPropagation(),_t=!0,H=(t.pageX-at)*nt+rt,V=(t.pageY-ot)*nt+dt,O.update(),xt=!0,yt=!0,U.update(),U.idle()}function y(t){if(t.stopPropagation(),xt&&_t){var e=(t.pageX-at)*nt+rt,n=(t.pageY-ot)*nt+dt;Y(H-e,V-n),H=e,V=n,O.update()}}function x(t){t.stopPropagation(),xt&&_t&&(_t=!1,O.idle(),xt=!1,yt=!1,U.update(),U.idle())}function T(t){t.stopPropagation();var e,n,a,o;e=(t.touches[0].pageX-at)*nt+rt,j=e,n=(t.touches[0].pageY-ot)*nt+dt,W=n,t.touches.length>2&&(Mt=!0),2===t.touches.length&&(a=(t.touches[1].pageX-at)*nt+rt,o=(t.touches[1].pageY-ot)*nt+dt,k=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),z=k,D=(e+a)/2,F=(n+o)/2),1===t.touches.length&&(Lt=!1,mt=!0,window.clearInterval(R),R=window.setInterval(S,1e3),Mt=!1,vt=!1,O.update(),xt=!0,yt=!0,U.update(),U.idle())}function P(t){if(t.stopPropagation(),!Lt&&!vt){var e,n,a,o;xt&&(mt=!1,e=(t.touches[0].pageX-at)*nt+rt,n=(t.touches[0].pageY-ot)*nt+dt,Mt||2!==t.touches.length?(Y(j-e,W-n),O.update()):(a=(t.touches[1].pageX-at)*nt+rt,o=(t.touches[1].pageY-ot)*nt+dt,z=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),D=(e+a)/2,F=(n+o)/2),j=e,W=n)}}function X(t){t.stopPropagation();var a,i,l;Lt||vt||xt&&(1===t.touches.length&&(Mt||(vt=!0,a=q.containerPointToLatLng(o.point(D,F)),i=($.lat+a.lat)/2,i=e>=i?i:e,i=i>=n?i:n,l=($.lng+a.lng)/2,D>it&&a.lng<$.lng&&(l=($.lng+a.lng+360)/2,l=180>=l?l:l-360),it>D&&a.lng>$.lng&&(l=($.lng+a.lng-360)/2,l=l>=180?l:l+360),z>k?E(o.latLng(i,l),r+1):E(o.latLng(i,l),r-1),O.update(),O.idle(),xt=!1,yt=!1,U.update(),U.idle())),0===t.touches.length&&(window.clearInterval(R),O.idle(),xt=!1,yt=!1,U.update(),U.idle()))}function Y(t,a){var i=q.containerPointToLatLng(o.point(0,0)),l=q.containerPointToLatLng(o.point(2*it,2*lt));i.lat>e&&0>a&&(a=0),l.lat<n&&a>0&&(a=0),$=q.containerPointToLatLng(o.point(it+t,lt+a)),C()}function E(t,e){var n,a;e=N>=e?e:N,e=e>=K?e:K,I(t,e)?($=t,r=e,C()):(n=q.containerPointToLatLng(o.point(0,0)),a=q.containerPointToLatLng(o.point(2*it,2*lt)),t=a.lat>0?o.latLng(a.lat-.1*(n.lat-a.lat),t.lng):n.lat<0?o.latLng(n.lat+.1*(n.lat-a.lat),t.lng):o.latLng(0,t.lng),I(t,e)&&($=t,r=e,C()))}function b(){Yt&&(window.clearInterval(Yt),Yt=null)}function C(){q.setView($,r,{animate:!1}),Z.setView(q.containerPointToLatLng(o.point(ut,gt)),r,{animate:!1})}function S(){mt&&(Lt=!0,window.clearInterval(R),O.idle(),xt=!1,yt=!1,U.update(),U.idle()),mt=!0}function I(t,a){var i,l,d=!0;return q.setView(t,a,{animate:!1}),i=q.containerPointToLatLng(o.point(0,0)),l=q.containerPointToLatLng(o.point(2*it,2*lt)),i.lat>e&&(d=!1),l.lat<n&&(d=!1),q.setView($,r,{animate:!1}),d}if(!t||"object"!=typeof t)throw 400;if(void 0===i||"number"!=typeof i||i>e||n>i)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===r||"number"!=typeof r)throw 400;if(!d||"object"!=typeof d)throw 400;var Z,q,H,V,j,W,k,z,D,F,R,A,B,G,J,K,N,O,Q,U,$=o.latLng(i,l),tt=t.getFrame(),et=t.getContent(),nt=t.getRowScale(),at=tt.offsetLeft,ot=tt.offsetTop,it=t.getWidth()/2,lt=t.getHeight()/2,rt=t.frameXYToContentXY([0,0])[0],dt=t.frameXYToContentXY([0,0])[1],ct=t.frameXYToContentXY([tt.clientWidth/nt,tt.clientHeight/nt])[0],pt=t.frameXYToContentXY([tt.clientWidth/nt,tt.clientHeight/nt])[1],ut=(rt+ct)/2,gt=(dt+pt)/2,ht=document.createElement("div"),st=document.createElement("div"),ft=document.createElement("div"),wt=document.createElement("div"),_t=!1,vt=!1,Lt=!1,mt=!0,Mt=!1,yt=!1,xt=!1,Tt=!1,Pt=!1,Xt=!1,Yt=null;ht.classList.add("thr0w_leaflet_container"),et.appendChild(ht),st.id="thr0w_leaflet_"+et.id,st.classList.add("thr0w_leaflet_container__map"),st.style.left=rt+"px",st.style.top=dt+"px",st.style.width=ct-rt+"px",st.style.height=pt-dt+"px",ht.appendChild(st),Z=o.map("thr0w_leaflet_"+et.id,d),ft.id="thr0w_leaflet_positioning_"+et.id,ft.classList.add("thr0w_leaflet_container__map"),ft.classList.add("thr0w_leaflet_container__map--positioning"),ht.appendChild(ft),q=o.map("thr0w_leaflet_positioning_"+et.id),wt.classList.add("thr0w_leaflet_palette"),wt.innerHTML=['<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--plus">+</div>',"</div>",'<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--minus">-</div>',"</div>"].join("\n"),et.appendChild(wt),C(),K=Z.getMinZoom(),N=Z.getMaxZoom(),O=new window.thr0w.Sync(t,"thr0w_leaflet_"+et.id,c,p),Q=new window.thr0w.Sync(t,"thr0w_leaflet_animation_"+et.id,c,p,!0),U=new window.thr0w.Sync(t,"thr0w_leaflet_oob_"+et.id,u,g),ht.addEventListener("mousedown",M,!0),ht.addEventListener("mousemove",y,!0),ht.addEventListener("mouseup",x,!0),ht.addEventListener("touchstart",T,!0),ht.addEventListener("touchmove",P,!0),ht.addEventListener("touchend",X,!0),ht.addEventListener("touchcancel",X,!0),wt.querySelector(".thr0w_leaflet_palette__row__cell--plus").addEventListener("click",L),wt.querySelector(".thr0w_leaflet_palette__row__cell--minus").addEventListener("click",m),this.moveTo=h,this.moveStop=s,this.getLeafletMap=f,this.getCenterLat=w,this.getCenterLng=_,this.getZoomLevel=v}if(void 0===window.thr0w)throw 400;var e=85,n=-85,a=33,o=window.L,i={};window.thr0w.leaflet=i,i.Map=t}();